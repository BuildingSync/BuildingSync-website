{% extends 'base.html' %}

{% load bootstrap3 %}

{% block title %}Add Use Case{% endblock %}

{% block content %}
	<div class="container">
    	<div class="row">
    		<div class="col-md-5">
				<form action="" method="post" enctype="multipart/form-data">
				    {% csrf_token %}
				    {{ form.as_table }}
				    <div class="pad-20">
				    	<button type="submit">Submit</button>
				    </div>
				</form>
			</div>
            {%  if object.schema %}
            <div class="col-md-7">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <div class="callout-box">
                            <h2>Use Case Template</h2>
                            <p> Fill out the CSV Use Case template file mapping your use case to the BuildingSync schema and upload it to the left.</p>
                            <span class="pad-20"><a class="btn btn-accent" href="{% url 'download_template' template_id=object.schema.id %}" role="button">
                            <i class="fa fa-arrow-circle-o-down" aria-hidden="true"></i>
                            Download Use Case Template
                            </a></span>
                        </div>
                    </div>
                </div>
            </div>
            {%  endif  %}
		</div>
        <div class="row">
            <div class="col-md-12">
                {% if object.parsing_errors %}
                    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                      <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingOne">
                          <h4 class="panel-title">
                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                <span class="red"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>&nbsp;Parsing Errors</span>
                            </a>
                          </h4>
                        </div>
                        <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">
                            <ul>
                                {% for e in object.parsing_errors %}
                                    <li>{{  e }}</li>
                                {%  endfor %}
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                {%  endif %}
            </div>
        </div>
	</div>
{% endblock content %}
